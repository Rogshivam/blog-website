# ============================================
# 1. Base image
# ============================================
FROM node:18-alpine

# Set working directory inside container
WORKDIR /app

# ============================================
# 2. Copy package files & install only prod deps
# ============================================
COPY package*.json package-lock.json ./

# Install only production dependencies
RUN npm install --production

# ============================================
# 3. Copy backend source code
# ============================================
COPY . .

# ============================================
# 4. Expose port
# ============================================
EXPOSE 5000

# ============================================
# 5. Start server (using app.js)
# ============================================
CMD ["node", "app.js"]